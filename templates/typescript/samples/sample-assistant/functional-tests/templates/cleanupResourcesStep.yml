steps:
- task: AzureCLI@2
  displayName: 'Prepare: Delete preexisting resources'
  inputs:
    azureSubscription: $(AzureSubscription)
    scriptType: pscore
    scriptLocation: inlineScript
    inlineScript: |
     # If RG exists, delete it to avoid possible App ID registration conflict.
     $botexists = az group exists --name $(BotName)

     if ($botexists -eq 'true')
     {
         Write-Host "Resource group $(BotName) exists, there is likely an error on the previous build. Deleting."
         az group delete --name $(BotName) --yes
     }
     else
     {
         Write-Host "Resource group $(BotName) does not exist."
     }

    workingDirectory: 'templates/typescript/samples/$(BotName)'
