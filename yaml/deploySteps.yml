steps:
  - pwsh: |
     # TODO: Check if the line below is necessary
     # Invoke-WebRequest -Uri https://aka.ms/installazurecliwindows -OutFile .\AzureCLI.msi; Start-Process msiexec.exe -Wait -ArgumentList '/I AzureCLI.msi /quiet'

     az login --service-principal --username "$(ServicePrincipal)" --password "$(AzureDevOps-ServicePrincipal-Secret)" --tenant "$(Azure_Tenant)"

     ./deployment/scripts/deploy.ps1 -name $(BotName) -location $(Location) -languages $(BotLanguages) -appId $(BotAppId) -appPassword $(BottAppPassword) -createLuisAuthoring -luisAuthoringRegion $(LuisAuthoringRegion) -logFolder "deployment"
    errorActionPreference: continue
    workingDirectory: $(WorkingDirectory)
    displayName: 'Deploy'
    continueOnError: true
